<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendar - Experiences shaped by Norway's quiet wilderness</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital@0;1&family=Barlow:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* Figma design tokens */
    :root {
      --text-primary: #1a1a1a;
      --background-brand: #f3f0db;
      --stroke-primary: #1a1a1a;
      --font-heading: 'Crimson Text', 'Mrs Eaves OT', Georgia, serif;
      --font-body: 'Barlow', 'Trade Gothic Next LT Pro', sans-serif;
      --space-xl: 96px;
      --space-lg: 64px;
      --space-md: 40px;
      --page-margin: 48px;
      --border-radius-pill: 9999px;
      --border-width: 1px;
      --heading-4xl: 55px;
      --heading-3xl: 45px;
      --body-md: 16px;
      --body-sm: 14px;
      --body-xs: 12px;
      --line-height-tight: 1.05;
      --line-height-body: 1.3;
      --line-height-label: 1.4;
      --letter-spacing-heading: -2px;
      --letter-spacing-label: 4px;
      --gutter: 20px;
      --event-image-width: 530px;
      --event-image-height: 397px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      font-size: var(--body-md);
      color: var(--text-primary);
      background-color: var(--background-brand);
      line-height: var(--line-height-body);
      -webkit-font-smoothing: antialiased;
    }

    .page {
      max-width: 1728px;
      margin: 0 auto;
      padding: var(--page-margin);
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: var(--space-xl);
    }

    .header__title {
      font-family: var(--font-heading);
      font-size: var(--heading-4xl);
      font-weight: 300;
      font-style: italic;
      line-height: var(--line-height-tight);
      letter-spacing: var(--letter-spacing-heading);
      margin-bottom: 16px;
    }

    .header__subtitle {
      font-size: var(--body-md);
      font-weight: 400;
      margin-bottom: var(--space-md);
      letter-spacing: 0;
    }

    .date-range-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      font-family: var(--font-body);
      font-size: var(--body-md);
      font-weight: 400;
      color: var(--text-primary);
      background: transparent;
      border: var(--border-width) solid var(--stroke-primary);
      border-radius: var(--border-radius-pill);
      cursor: pointer;
      letter-spacing: 0;
    }

    .date-range-btn__icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      transition: transform 0.2s ease;
    }

    .date-range-btn.is-open .date-range-btn__icon {
      transform: rotate(180deg);
    }

    /* Date range picker */
    .date-range-picker {
      position: relative;
      display: inline-block;
    }

    .date-range-picker__dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: var(--background-brand);
      border: var(--border-width) solid var(--stroke-primary);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      z-index: 100;
    }

    .date-range-picker__dropdown.is-visible {
      display: block;
    }

    .date-range-picker__calendars {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 20px;
    }

    .date-range-picker__header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .date-range-picker__month-labels {
      display: flex;
      gap: 48px;
      flex: 1;
      justify-content: center;
    }

    .date-range-picker__header .date-range-picker__month-label {
      font-size: var(--body-sm);
      color: rgba(0,0,0,0.7);
      margin: 0;
    }

    .date-range-picker__calendar {
      min-width: 220px;
    }

    .date-range-picker__calendar .date-range-picker__weekdays {
      margin-top: 0;
    }

    .date-range-picker__month-btn {
      width: 28px;
      height: 28px;
      padding: 0;
      font-size: 14px;
      border: none;
      background: transparent;
      color: var(--text-primary);
      cursor: pointer;
      border-radius: 4px;
    }

    .date-range-picker__month-btn:hover {
      background: rgba(0,0,0,0.06);
    }

    .date-range-picker__month-btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .date-range-picker__weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      margin-bottom: 6px;
    }

    .date-range-picker__weekday {
      font-size: 10px;
      font-weight: 500;
      text-transform: uppercase;
      text-align: center;
      color: rgba(0,0,0,0.5);
    }

    .date-range-picker__days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }

    .date-range-picker__day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--body-sm);
      border: none;
      background: transparent;
      color: var(--text-primary);
      cursor: pointer;
      border-radius: 4px;
    }

    .date-range-picker__day:hover:not(:disabled) {
      background: rgba(0,0,0,0.06);
    }

    .date-range-picker__day:disabled,
    .date-range-picker__day.date-range-picker__day--disabled {
      color: rgba(0,0,0,0.3);
      cursor: default;
    }

    .date-range-picker__day.is-selected {
      background: var(--stroke-primary);
      color: var(--background-brand);
    }

    .date-range-picker__day.is-in-range {
      background: rgba(0,0,0,0.08);
    }

    .date-range-picker__day.is-empty {
      visibility: hidden;
    }

    .date-range-picker__actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid rgba(0,0,0,0.1);
    }

    .date-range-picker__btn {
      padding: 8px 20px;
      font-family: var(--font-body);
      font-size: var(--body-sm);
      font-weight: 500;
      border-radius: var(--border-radius-pill);
      cursor: pointer;
      border: var(--border-width) solid var(--stroke-primary);
      background: transparent;
      color: var(--text-primary);
    }

    .date-range-picker__btn--primary {
      background: var(--stroke-primary);
      color: var(--background-brand);
    }

    .event-card[data-filtered="true"] {
      display: none;
    }

    .date-row-pair[data-filtered="true"],
    .date-spacer[data-filtered="true"],
    .month-row[data-filtered="true"] {
      display: none;
    }

    /* Main layout - 4 columns: month | date | day label | events */
    .calendar-layout {
      display: flex;
      gap: var(--space-lg);
      margin-top: var(--space-lg);
      align-items: flex-start;
      padding-right: var(--space-lg);
    }

    /* Date columns - month | date+day pairs */
    .dates-section {
      flex-shrink: 0;
      display: flex;
      align-items: flex-start;
      gap: var(--gutter);
    }

    .date-column {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .date-column--month {
      min-width: 60px;
    }

    .month-row {
      display: flex;
      align-items: flex-start;
      position: sticky;
      top: 10px;
      z-index: 1;
      background-color: var(--background-brand);
      padding-bottom: 4px;
    }

    .month-row.is-pushed {
      transform: translateY(var(--push-amount, 0));
    }

    .date-column--month .date-label {
      width: auto;
      min-width: auto;
    }

    .date-column--date-day {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .date-row-pair {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      position: sticky;
      top: 10px;
      z-index: 1;
      background-color: var(--background-brand);
      padding-bottom: 4px;
    }

    .date-row-pair.is-pushed {
      transform: translateY(var(--push-amount, 0));
    }

    .date-row-pair .date-label {
      white-space: nowrap;
    }

    .date-label {
      font-family: var(--font-body);
      font-size: var(--body-xs);
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: var(--letter-spacing-label);
      line-height: var(--line-height-label);
      color: var(--text-primary);
      display: inline-block;
      width: 140px;
      min-width: 140px;
      flex-shrink: 0;
    }

    .date-row-pair .date-label:empty {
      min-height: 1em;
    }

    /* Spacer = event block height - date row height - gap. Ensures date labels align with event tops. */
    .date-spacer {
      height: calc((var(--event-image-height) + var(--space-lg)) * 2 - 29px);
    }

    .date-spacer--single {
      height: calc(var(--event-image-height) + var(--space-lg) - 29px);
    }

    .date-spacer--triple {
      height: calc((var(--event-image-height) + var(--space-lg)) * 3 - 29px);
    }

    .date-column--month .date-spacer {
      height: calc(22.5px + (var(--event-image-height) + var(--space-lg)) * 2 - 29px);
    }

    .date-column--month .date-spacer--single {
      height: calc(22.5px + var(--event-image-height) + var(--space-lg) - 29px);
    }


    /* Right column - events */
    .events-column {
      flex: 1;
      min-width: 0;
    }

    .event-card {
      display: flex;
      gap: var(--gutter);
      margin-bottom: var(--space-lg);
      align-items: flex-start;
    }

    .event-card:last-child {
      margin-bottom: 0;
    }

    .event-card__image {
      flex-shrink: 0;
      width: var(--event-image-width);
      height: var(--event-image-height);
      object-fit: cover;
      background: #e8e5d8;
    }

    .event-card__content {
      flex: 1;
      min-width: 0;
    }

    .event-card__title {
      font-family: var(--font-heading);
      font-size: var(--heading-3xl);
      font-weight: 300;
      font-style: italic;
      line-height: 1.1;
      letter-spacing: var(--letter-spacing-heading);
      margin-bottom: 8px;
    }

    .event-card__time {
      font-size: var(--body-md);
      margin-bottom: 8px;
    }

    .event-card__description {
      font-size: var(--body-sm);
      margin-bottom: var(--space-md);
      color: var(--text-primary);
    }

    .event-card__actions {
      display: flex;
      align-items: center;
      gap: var(--gutter);
      flex-wrap: wrap;
    }

    .btn-book {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 6px 24px;
      font-family: var(--font-body);
      font-size: 16px;
      font-weight: 500;
      line-height: 1.3;
      letter-spacing: 0;
      color: var(--text-primary);
      background: var(--background-brand);
      border: 1.5px solid var(--stroke-primary);
      border-radius: 9999px;
      cursor: pointer;
      text-decoration: none;
    }

    .btn-book__icon {
      flex-shrink: 0;
      width: 16px;
      height: 16px;
      font-size: 18px;
    }

    .btn-book__icon path {
      stroke: currentColor;
      stroke-width: 1.5;
    }

    .link-explore {
      font-size: var(--body-sm);
      color: var(--text-primary);
      text-decoration: underline;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header__title">Calendar</h1>
      <p class="header__subtitle">Experiences shaped by Norway's quiet wilderness</p>
      <div class="date-range-picker">
        <button class="date-range-btn" type="button" id="date-range-trigger">
          <span id="date-range-label">Date range</span>
          <svg class="date-range-btn__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
        </button>
        <div class="date-range-picker__dropdown" id="date-range-dropdown" aria-hidden="true">
          <div class="date-range-picker__calendars">
            <div class="date-range-picker__header">
              <button type="button" class="date-range-picker__month-btn" data-nav="prev" aria-label="Previous months">‹</button>
              <div class="date-range-picker__month-labels">
                <span class="date-range-picker__month-label" data-month-left></span>
                <span class="date-range-picker__month-label" data-month-right></span>
              </div>
              <button type="button" class="date-range-picker__month-btn" data-nav="next" aria-label="Next months">›</button>
            </div>
            <div class="date-range-picker__calendar" data-calendar="left">
              <div class="date-range-picker__weekdays">
                <span class="date-range-picker__weekday">S</span>
                <span class="date-range-picker__weekday">M</span>
                <span class="date-range-picker__weekday">T</span>
                <span class="date-range-picker__weekday">W</span>
                <span class="date-range-picker__weekday">T</span>
                <span class="date-range-picker__weekday">F</span>
                <span class="date-range-picker__weekday">S</span>
              </div>
              <div class="date-range-picker__days" id="calendar-from-days"></div>
            </div>
            <div class="date-range-picker__calendar" data-calendar="right">
              <div class="date-range-picker__weekdays">
                <span class="date-range-picker__weekday">S</span>
                <span class="date-range-picker__weekday">M</span>
                <span class="date-range-picker__weekday">T</span>
                <span class="date-range-picker__weekday">W</span>
                <span class="date-range-picker__weekday">T</span>
                <span class="date-range-picker__weekday">F</span>
                <span class="date-range-picker__weekday">S</span>
              </div>
              <div class="date-range-picker__days" id="calendar-to-days"></div>
            </div>
          </div>
          <div class="date-range-picker__actions">
            <button class="date-range-picker__btn" type="button" id="date-range-clear">Clear</button>
            <button class="date-range-picker__btn date-range-picker__btn--primary" type="button" id="date-range-apply">Apply</button>
          </div>
        </div>
      </div>
    </header>

    <main class="calendar-layout">
      <aside class="dates-section">
        <div class="date-column date-column--month">
          <div class="month-row" data-month="april">
            <span class="date-label">APRIL</span>
          </div>
          <div class="date-spacer" data-month="april" data-date="2025-04-03"></div>
          <div class="date-spacer" data-month="april" data-date="2025-04-04"></div>
          <div class="date-spacer" data-month="april" data-date="2025-04-05"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-07"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-10"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-11"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-12"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-14"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-17"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-19"></div>
          <div class="date-spacer date-spacer--single" data-month="april" data-date="2025-04-20"></div>
          <div class="month-row month-row--may" data-month="may">
            <span class="date-label">MAY</span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-07"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-08"></div>
          <div class="date-spacer" data-month="may" data-date="2025-05-09"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-10"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-11"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-12"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-14"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-15"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-16"></div>
          <div class="date-spacer date-spacer--single" data-month="may" data-date="2025-05-17"></div>
        </div>
        <div class="date-column date-column--date-day">
          <div class="date-row-pair" data-date="2025-04-03">
            <span class="date-label">FRIDAY 3RD</span>
            <span class="date-label">GOOD FRIDAY</span>
          </div>
          <div class="date-spacer"></div>
          <div class="date-row-pair" data-date="2025-04-04">
            <span class="date-label">SATURDAY 4TH</span>
            <span class="date-label">EASTER EVE</span>
          </div>
          <div class="date-spacer"></div>
          <div class="date-row-pair" data-date="2025-04-05">
            <span class="date-label">SUNDAY 5TH</span>
            <span class="date-label">EASTER SUNDAY</span>
          </div>
          <div class="date-spacer"></div>
          <div class="date-row-pair" data-date="2025-04-07">
            <span class="date-label">TUESDAY 7TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-10">
            <span class="date-label">FRIDAY 10TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-11">
            <span class="date-label">SATURDAY 11TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-12">
            <span class="date-label">SUNDAY 12TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-14">
            <span class="date-label">TUESDAY 14TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-17">
            <span class="date-label">FRIDAY 17TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-19">
            <span class="date-label">SATURDAY 19TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-04-20">
            <span class="date-label">SUNDAY 19TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-07">
            <span class="date-label">THURSDAY 7TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-08">
            <span class="date-label">FRIDAY 8TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-09">
            <span class="date-label">SATURDAY 9TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer"></div>
          <div class="date-row-pair" data-date="2025-05-10">
            <span class="date-label">SUNDAY 10TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-11">
            <span class="date-label">MONDAY 11TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-12">
            <span class="date-label">TUESDAY 12TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-14">
            <span class="date-label">THURSDAY 14TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-15">
            <span class="date-label">FRIDAY 15TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-16">
            <span class="date-label">SATURDAY 16TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
          <div class="date-row-pair" data-date="2025-05-17">
            <span class="date-label">SUNDAY 17TH</span>
            <span class="date-label"></span>
          </div>
          <div class="date-spacer date-spacer--single" data-month="may"></div>
        </div>
      </aside>

      <section class="events-column">
        <article class="event-card" data-date="2025-04-03">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=560&q=80" alt="Hot chocolate" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Hot Chocolate and Easter Quiz in The Lavvo</h2>
            <p class="event-card__time">14:00</p>
            <p class="event-card__description">Cozy up in a traditional Sámi tent with steaming hot chocolate and test your knowledge in our festive Easter quiz. A perfect way to warm up on a spring afternoon.</p>
            <div class="event-card__actions">
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>
        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card" data-date="2025-04-04">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=560&q=80" alt="Easter egg hunt" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Easter egg hunt</h2>
            <p class="event-card__time">13:00</p>
            <p class="event-card__description">Join the hunt through our woodland grounds in search of hidden treats. A family-friendly adventure that brings the magic of Easter to the Norwegian countryside.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>
        <article class="event-card" data-date="2025-04-04">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1615529328331-f8917597711f?w=560&q=80" alt="Knitting course" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Easter themed knitting course</h2>
            <p class="event-card__time">14:00</p>
            <p class="event-card__description">Learn to knit your own spring-inspired creations in this special Easter workshop. All skill levels welcome—yarn, needles, and expert guidance provided.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card" data-date="2025-04-05">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1448375240586-882707db888b?w=560&q=80" alt="Forest walk" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Forest walk with the hotel manager</h2>
            <p class="event-card__time">10:00</p>
            <p class="event-card__description">Discover the hidden trails and stories of our local woodland. A guided walk sharing insights into the forest ecosystem and area history.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>
        <article class="event-card" data-date="2025-04-05">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=560&q=80" alt="Sunday brunch" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Sunday Brunch</h2>
            <p class="event-card__time">13:00</p>
            <p class="event-card__description">Indulge in a generous spread of Nordic delicacies, pastries, and seasonal ingredients. The perfect lazy Sunday start.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=560&q=80" alt="Wine tasting" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Wine tasting</h2>
            <p class="event-card__time">16:00</p>
            <p class="event-card__description">Sample a curated selection of Nordic and international wines in an intimate setting. Learn about pairings and regional favorites from our sommelier.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1615529328331-f8917597711f?w=560&q=80" alt="Knitting course" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Knitting course</h2>
            <p class="event-card__time">15:00</p>
            <p class="event-card__description">Master the basics or refine your technique in this relaxed, hands-on workshop. A calming escape into the art of knitting.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=560&q=80" alt="Sunday brunch" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Sunday brunch</h2>
            <p class="event-card__time">13:00</p>
            <p class="event-card__description">Indulge in a generous spread of Nordic delicacies, pastries, and seasonal ingredients. The perfect lazy Sunday start.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=560&q=80" alt="Wine tasting" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Wine tasting</h2>
            <p class="event-card__time">16:00</p>
            <p class="event-card__description">Sample a curated selection of Nordic and international wines in an intimate setting. Learn about pairings and regional favorites from our sommelier.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1615529328331-f8917597711f?w=560&q=80" alt="Knitting course" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Knitting course</h2>
            <p class="event-card__time">15:00</p>
            <p class="event-card__description">Master the basics or refine your technique in this relaxed, hands-on workshop. A calming escape into the art of knitting.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=560&q=80" alt="Sunday brunch" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Sunday brunch</h2>
            <p class="event-card__time">13:00</p>
            <p class="event-card__description">Indulge in a generous spread of Nordic delicacies, pastries, and seasonal ingredients. The perfect lazy Sunday start.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1615529328331-f8917597711f?w=560&q=80" alt="Knitting course" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Knitting course</h2>
            <p class="event-card__time">15:00</p>
            <p class="event-card__description">Master the basics or refine your technique in this relaxed, hands-on workshop. A calming escape into the art of knitting.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=560&q=80" alt="Sunday brunch" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Sunday brunch</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Indulge in a generous spread of Nordic delicacies, pastries, and seasonal ingredients. The perfect lazy Sunday start.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=560&q=80" alt="Lavvo experience" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Lavvo experience</h2>
            <p class="event-card__time">14:00</p>
            <p class="event-card__description">Step inside a traditional Sámi lavvo for an authentic taste of Arctic culture. Stories, warmth, and perhaps a hot drink by the fire.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=560&q=80" alt="Wine tasting" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Wine tasting</h2>
            <p class="event-card__time">16:00</p>
            <p class="event-card__description">Sample a curated selection of Nordic and international wines in an intimate setting. Learn about pairings and regional favorites from our sommelier.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1615529328331-f8917597711f?w=560&q=80" alt="Knitting course" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Knitting course</h2>
            <p class="event-card__time">15:00</p>
            <p class="event-card__description">Master the basics or refine your technique in this relaxed, hands-on workshop. A calming escape into the art of knitting.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=560&q=80" alt="Boathouse dinner" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Boathouse dinner</h2>
            <p class="event-card__time">18:00</p>
            <p class="event-card__description">Savor fresh, locally caught seafood and Nordic flavors in our waterside boathouse. An intimate dining experience with stunning fjord views.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>

        <article class="event-card">
          <img class="event-card__image" src="https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=560&q=80" alt="Constitution Day" width="530" height="397">
          <div class="event-card__content">
            <h2 class="event-card__title">Constitution Day Celebrations and Sunday Brunch</h2>
            <p class="event-card__time">13:00</p>
            <p class="event-card__description">Celebrate Norway's national day with a festive brunch, live music, and the company of fellow guests. A true Norwegian experience.</p>
            <div class="event-card__actions">
              <button class="btn-book">Book <svg class="btn-book__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M1 8H15" stroke="currentColor"/><path d="M10 3L15 8L10 13" stroke="currentColor" stroke-miterlimit="2.61313"/></svg></button>
              <button class="link-explore">Explore</button>
            </div>
          </div>
        </article>
      </section>
    </main>
  </div>
  <script>
    (function() {
      // Event dates by DOM order (for events without data-date)
      const EVENT_DATES = [
        '2025-04-03', '2025-04-03', '2025-04-04', '2025-04-04', '2025-04-05', '2025-04-05',
        '2025-04-07', '2025-04-10', '2025-04-11', '2025-04-12', '2025-04-14', '2025-04-17',
        '2025-04-19', '2025-04-20', '2025-05-07', '2025-05-08', '2025-05-09', '2025-05-09',
        '2025-05-10', '2025-05-11', '2025-05-12', '2025-05-14', '2025-05-15', '2025-05-16',
        '2025-05-17'
      ];

      function initEventDates() {
        document.querySelectorAll('.event-card').forEach((card, i) => {
          if (!card.dataset.date && EVENT_DATES[i]) card.dataset.date = EVENT_DATES[i];
        });
        document.querySelectorAll('.date-column--date-day [data-month]').forEach(el => delete el.dataset.month);
      }

      function formatDateRange(from, to) {
        if (!from || !to || from === '2025-04-03' && to === '2025-05-17') return 'Date range';
        const d1 = new Date(from + 'T12:00:00');
        const d2 = new Date(to + 'T12:00:00');
        const opts = { day: 'numeric', month: 'short', year: 'numeric' };
        return d1.toLocaleDateString('en-GB', opts) + ' – ' + d2.toLocaleDateString('en-GB', opts);
      }

      function updateDateRangeLabel(from, to) {
        const label = document.getElementById('date-range-label');
        if (label) label.textContent = formatDateRange(from, to);
      }

      const DATE_MIN = '2025-04-03';
      const DATE_MAX = '2025-05-17';

      const dateRangeState = { from: DATE_MIN, to: DATE_MAX };
      const calendarMonths = { left: { year: 2025, month: 4 }, right: { year: 2025, month: 5 } };

      function toYMD(d) {
        const y = d.getFullYear(), m = String(d.getMonth() + 1).padStart(2, '0'), day = String(d.getDate()).padStart(2, '0');
        return y + '-' + m + '-' + day;
      }

      function parseYMD(s) {
        const [y, m, d] = s.split('-').map(Number);
        return new Date(y, m - 1, d);
      }

      function renderCalendar(which, containerId, monthLabelEl) {
        const { year, month } = calendarMonths[which];
        const container = document.getElementById(containerId);
        if (!container) return;

        const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        monthLabelEl.textContent = monthNames[month - 1] + ' ' + year;

        const first = new Date(year, month - 1, 1);
        const last = new Date(year, month, 0);
        const startPad = first.getDay();
        const daysInMonth = last.getDate();

        const minD = parseYMD(DATE_MIN);
        const maxD = parseYMD(DATE_MAX);
        const fromD = parseYMD(dateRangeState.from);
        const toD = parseYMD(dateRangeState.to);

        let html = '';
        for (let i = 0; i < startPad; i++) {
          html += '<button type="button" class="date-range-picker__day is-empty" disabled></button>';
        }
        for (let day = 1; day <= daysInMonth; day++) {
          const d = new Date(year, month - 1, day);
          const ymd = toYMD(d);
          const disabled = d < minD || d > maxD;
          const isFrom = ymd === dateRangeState.from;
          const isTo = ymd === dateRangeState.to;
          const inRange = !disabled && d >= fromD && d <= toD && (dateRangeState.from !== dateRangeState.to);
          const cls = ['date-range-picker__day'];
          if (disabled) cls.push('date-range-picker__day--disabled');
          if (isFrom || isTo) cls.push('is-selected');
          else if (inRange) cls.push('is-in-range');
          html += '<button type="button" class="' + cls.join(' ') + '" data-date="' + ymd + '"' + (disabled ? ' disabled' : '') + '>' + day + '</button>';
        }
        container.innerHTML = html;

        container.querySelectorAll('.date-range-picker__day:not(:disabled):not(.is-empty)').forEach(btn => {
          btn.addEventListener('click', function() {
            const ymd = this.dataset.date;
            const clickedD = parseYMD(ymd);
            if (dateRangeState.from === dateRangeState.to) {
              if (ymd === dateRangeState.from) return;
              if (clickedD < fromD) {
                dateRangeState.from = ymd;
              } else {
                dateRangeState.to = ymd;
              }
            } else if (clickedD < fromD) {
              dateRangeState.from = ymd;
            } else if (clickedD > toD) {
              dateRangeState.to = ymd;
            } else {
              dateRangeState.from = ymd;
              dateRangeState.to = ymd;
            }
            renderCalendar('left', 'calendar-from-days', document.querySelector('[data-month-left]'));
            renderCalendar('right', 'calendar-to-days', document.querySelector('[data-month-right]'));
          });
        });
      }

      function setupMonthNav() {
        const minDate = parseYMD(DATE_MIN);
        const maxDate = parseYMD(DATE_MAX);
        const prevBtn = document.querySelector('.date-range-picker__header .date-range-picker__month-btn[data-nav="prev"]');
        const nextBtn = document.querySelector('.date-range-picker__header .date-range-picker__month-btn[data-nav="next"]');

        function updateNavState() {
          const leftFirst = new Date(calendarMonths.left.year, calendarMonths.left.month - 1, 1);
          const rightLast = new Date(calendarMonths.right.year, calendarMonths.right.month, 0);
          if (prevBtn) prevBtn.disabled = leftFirst <= minDate;
          if (nextBtn) nextBtn.disabled = rightLast >= maxDate;
        }

        if (prevBtn) {
          prevBtn.onclick = () => {
            const { year, month } = calendarMonths.left;
            const prev = month === 1 ? { year: year - 1, month: 12 } : { year, month: month - 1 };
            calendarMonths.left = prev;
            const nextMonth = prev.month === 12 ? { year: prev.year + 1, month: 1 } : { year: prev.year, month: prev.month + 1 };
            calendarMonths.right = nextMonth;
            renderCalendar('left', 'calendar-from-days', document.querySelector('[data-month-left]'));
            renderCalendar('right', 'calendar-to-days', document.querySelector('[data-month-right]'));
            updateNavState();
          };
        }
        if (nextBtn) {
          nextBtn.onclick = () => {
            const { year, month } = calendarMonths.right;
            const next = month === 12 ? { year: year + 1, month: 1 } : { year, month: month + 1 };
            calendarMonths.right = next;
            const prevMonth = next.month === 1 ? { year: next.year - 1, month: 12 } : { year: next.year, month: next.month - 1 };
            calendarMonths.left = prevMonth;
            renderCalendar('left', 'calendar-from-days', document.querySelector('[data-month-left]'));
            renderCalendar('right', 'calendar-to-days', document.querySelector('[data-month-right]'));
            updateNavState();
          };
        }
        updateNavState();
      }

      function initDateRangePicker() {
        const trigger = document.getElementById('date-range-trigger');
        const dropdown = document.getElementById('date-range-dropdown');
        const applyBtn = document.getElementById('date-range-apply');
        const clearBtn = document.getElementById('date-range-clear');

        setupMonthNav();

        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
          const isOpen = dropdown.classList.toggle('is-visible');
          trigger.classList.toggle('is-open', isOpen);
          dropdown.setAttribute('aria-hidden', !isOpen);
          if (isOpen) {
            renderCalendar('left', 'calendar-from-days', document.querySelector('[data-month-left]'));
            renderCalendar('right', 'calendar-to-days', document.querySelector('[data-month-right]'));
            setupMonthNav();
          }
        });

        document.addEventListener('click', function() {
          dropdown.classList.remove('is-visible');
          trigger.classList.remove('is-open');
          dropdown.setAttribute('aria-hidden', 'true');
        });
        dropdown.addEventListener('click', e => e.stopPropagation());

        applyBtn.addEventListener('click', function() {
          applyDateFilter(dateRangeState.from, dateRangeState.to);
          updateDateRangeLabel(dateRangeState.from, dateRangeState.to);
          requestAnimationFrame(function() {
            requestAnimationFrame(updateStickyState);
          });
          dropdown.classList.remove('is-visible');
          trigger.classList.remove('is-open');
        });

        clearBtn.addEventListener('click', function() {
          dateRangeState.from = DATE_MIN;
          dateRangeState.to = DATE_MAX;
          calendarMonths.left = { year: 2025, month: 4 };
          calendarMonths.right = { year: 2025, month: 5 };
          applyDateFilter(null, null);
          updateDateRangeLabel(null, null);
          requestAnimationFrame(function() {
            requestAnimationFrame(updateStickyState);
          });
          dropdown.classList.remove('is-visible');
          trigger.classList.remove('is-open');
        });
      }

      function applyDateFilter(from, to) {
        const events = document.querySelectorAll('.event-card');
        const datePairs = document.querySelectorAll('.date-row-pair');
        const spacers = document.querySelectorAll('.date-spacer');
        const monthRows = document.querySelectorAll('.month-row');

        const hasFilter = from && to;
        const fromTime = hasFilter ? new Date(from + 'T00:00:00').getTime() : 0;
        const toTime = hasFilter ? new Date(to + 'T23:59:59').getTime() : 0;

        const visibleDates = new Set();
        events.forEach(card => {
          const date = card.dataset.date;
          if (!date) return;
          const inRange = !hasFilter || (new Date(date).getTime() >= fromTime && new Date(date).getTime() <= toTime);
          card.dataset.filtered = inRange ? 'false' : 'true';
          if (inRange) visibleDates.add(date);
        });

        datePairs.forEach(pair => {
          const date = pair.dataset.date;
          const visible = !hasFilter || visibleDates.has(date);
          pair.dataset.filtered = visible ? 'false' : 'true';
          const spacer = pair.nextElementSibling;
          if (spacer && spacer.classList.contains('date-spacer')) {
            spacer.dataset.filtered = visible ? 'false' : 'true';
          }
        });

        const aprilDates = ['2025-04-03','2025-04-04','2025-04-05','2025-04-07','2025-04-10','2025-04-11','2025-04-12','2025-04-14','2025-04-17','2025-04-19','2025-04-20'];
        const mayDates = ['2025-05-07','2025-05-08','2025-05-09','2025-05-10','2025-05-11','2025-05-12','2025-05-14','2025-05-15','2025-05-16','2025-05-17'];
        const hasApril = !hasFilter || aprilDates.some(d => visibleDates.has(d));
        const hasMay = !hasFilter || mayDates.some(d => visibleDates.has(d));

        document.querySelectorAll('.date-column--month [data-month="april"]').forEach(el => {
          if (el.dataset.date) {
            el.dataset.filtered = (hasFilter && !visibleDates.has(el.dataset.date)) ? 'true' : 'false';
          } else {
            el.dataset.filtered = (hasFilter && !hasApril) ? 'true' : 'false';
          }
        });
        document.querySelectorAll('.date-column--month [data-month="may"]').forEach(el => {
          if (el.dataset.date) {
            el.dataset.filtered = (hasFilter && !visibleDates.has(el.dataset.date)) ? 'true' : 'false';
          } else {
            el.dataset.filtered = (hasFilter && !hasMay) ? 'true' : 'false';
          }
        });

        if (hasFilter && hasMay) {
          requestAnimationFrame(function() {
            requestAnimationFrame(function() {
              if (typeof updateStickyState === 'function') updateStickyState();
            });
          });
        }
      }

      initEventDates();
      initDateRangePicker();

      const STICKY_TOP = 10;
      const PUSH_START = 45;
      const pairsSelector = '.date-column--date-day .date-row-pair';
      const monthRowsSelector = '.date-column--month .month-row';

      function isElementHidden(el) {
        return el.dataset?.filtered === 'true' || (el.offsetParent === null && getComputedStyle(el).display === 'none');
      }

      function updatePushState(elements) {
        elements.forEach((el, index) => {
          let nextIndex = index + 1;
          let nextEl = elements[nextIndex];
          while (nextEl && isElementHidden(nextEl)) {
            nextIndex++;
            nextEl = elements[nextIndex];
          }
          if (!nextEl) {
            el.classList.remove('is-pushed');
            el.style.setProperty('--push-amount', '0px');
            return;
          }

          const nextRect = nextEl.getBoundingClientRect();
          const elHeight = el.offsetHeight;

          if (nextRect.top >= PUSH_START) {
            el.classList.remove('is-pushed');
            el.style.setProperty('--push-amount', '0px');
          } else if (nextRect.top <= STICKY_TOP) {
            el.classList.add('is-pushed');
            el.style.setProperty('--push-amount', `-${elHeight + STICKY_TOP + 4}px`);
          } else {
            el.classList.add('is-pushed');
            const progress = 1 - (nextRect.top - STICKY_TOP) / (PUSH_START - STICKY_TOP);
            const maxTranslate = elHeight + STICKY_TOP + 4;
            const translate = progress * maxTranslate;
            el.style.setProperty('--push-amount', `-${translate}px`);
          }
        });
      }

      function updateStickyState() {
        const pairs = document.querySelectorAll(pairsSelector);
        const monthRows = document.querySelectorAll(monthRowsSelector);
        updatePushState(Array.from(pairs).filter(function(el) { return !isElementHidden(el); }));
        updatePushState(Array.from(monthRows).filter(function(el) { return !isElementHidden(el); }));
      }

      let rafId = null;
      window.addEventListener('scroll', function() {
        if (rafId) cancelAnimationFrame(rafId);
        rafId = requestAnimationFrame(function() {
          updateStickyState();
          rafId = null;
        });
      }, { passive: true });

      updateStickyState();
    })();
  </script>
</body>
</html>
